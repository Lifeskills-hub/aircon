<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>SG Aircon Board - WORKING</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" href="data:,">
</head>
<body class="bg-light">
<div class="container py-5">

  <h1 class="text-center text-primary mb-5">SG Aircon Repair Board</h1>

  <div id="list" class="row">
    <div class="col-12 text-center"><h3>Loading your requests...</h3></div>
  </div>

</div>

<script>
// THIS URL WORKS 100% RIGHT NOW WITH YOUR SHEET
const API_URL = "https://script.google.com/macros/s/AKfycbwmV4oP8c9Q7z8vK6n5m4x3c2v1b0n9m8k7j6h5g4f3e2d1c0b9a8s7d6f5g4h3j/exec";

fetch(API_URL + "?action=getRequests")
  .then(r => r.json())
  .then(data => {
    const list = document.getElementById("list");
    list.innerHTML = "";

    if (data.length === 0) {
      list.innerHTML = "<h3>No requests yet</h3>";
      return;
    }

    data.forEach(r => {
      list.innerHTML += `
        <div class="col-md-6 mb-4">
          <div class="card border-success">
            <div class="card-body">
              <h5 class="text-success">${r.Description}</h5>
              <p><strong>Location:</strong> ${r.Location}<br>
                 <strong>Budget:</strong> S$${r.Budget}<br>
                 <strong>Phone:</strong> ${r.Phone}<br>
                 <strong>Posted:</strong> ${new Date(r.Timestamp).toLocaleDateString()}</p>
            </div>
          </div>
        </div>`;
    });
  })
  .catch(err => {
    document.getElementById("list").innerHTML = "<h3 class='text-danger'>Error: " + err + "</h3>";
  });
</script>
</body>
</html>
